# **系统架构设计**

该项目的架构示意图如下图所示：
![架构图](pics/架构图.png)

## **一、表示层**

### **1、用户界面设计**

通过Figma辅助设计，涵盖输入界面（支持文本输入、语音输入、图像输入）、目标语言选择界面、翻译结果显示界面、历史记录查看界面等。通过清晰的布局和交互设计，确保用户能够轻松操作，快速完成翻译任务。

### **2、功能模块**

**输入方式选择模块：**
为用户提供文本、语音、图像三种输入方式选项。用户可根据自身需求灵活切换，如在不方便打字时选择语音输入，需要翻译图片文字时选择图像输入。

**目标语言选择模块：**
展示可供选择的目标语言列表，用户选定后，系统以此为依据调用相应翻译服务。

**结果展示模块：**
以清晰、易读的格式呈现翻译结果，同时提供语音播放功能，方便用户听取翻译内容。

**历史记录模块：**
记录用户的翻译历史，用户可随时查看过往翻译记录，便于回顾和参考。

## **二、领域层**

### **1、核心业务逻辑**

**输入处理逻辑：**
根据用户选择的输入方式（文本、语音、图像），对输入内容进行预处理。对于语音输入，调用语音识别服务将其转换为文本；对于图像输入，调用OCR服务提取图像中的文本信息。

**服务调用逻辑：**
依据输入内容和目标语言，判断并调用对应的服务。如文本输入且已选定目标语言时，直接调用翻译服务；语音输入时，先经语音识别服务转文本后再调用翻译服务；图像输入则先通过OCR服务提取文本，再进行翻译服务调用。

**结果处理逻辑：**
对翻译服务返回的结果进行处理，包括格式调整、内容校验等，确保展示给用户的翻译结果准确、规范。

### **2、抽象接口定义**

定义一系列抽象接口，如TranslationService（翻译服务接口）、SpeechRecognitionService（语音识别服务接口）、OCRService（光学字符识别服务接口）等。这些接口明确了各服务的方法签名和参数规范，实现了不同服务的解耦，便于后续的开发、维护和扩展。

## **三、数据层**

### **1、数据库设计**

采用SQLite数据库，用于存储用户的翻译历史记录。表结构设计包含记录ID、输入内容、目标语言、翻译结果、翻译时间等字段，方便对历史记录进行管理、查询和展示。

### **2、数据访问操作**

通过数据访问对象（DAO）模式实现对数据库的操作。定义TranslationHistoryDao接口，包含插入翻译记录、查询历史记录、删除历史记录等方法。在具体实现中，利用Room数据库框架简化数据库操作流程，确保数据访问的高效性和准确性。

## **四、其他部分**

### **1、后端Mock服务**

使用Node.js或Flask搭建模拟API，涵盖翻译、语音合成、OCR等功能。模拟API可根据预设规则返回模拟数据，使前端开发人员在后端真实服务未完成时，仍能进行前端开发和测试，促进前后端并行开发，提高开发效率。

### **2、测试模块**

**单元测试：**
针对领域层的核心业务逻辑，使用JUnit编写单元测试用例，确保各功能模块的逻辑正确性。对于与Android界面交互相关的逻辑，采用Espresso进行测试，保证界面操作的流畅性和准确性。

**功能测试：**
使用Espresso编写UI自动化测试用例，模拟用户操作，对应用的整体功能进行测试，及时发现功能缺陷和界面问题，保障应用的质量和稳定性。